# daily-workflow-SKILL.md — תהליך עבודה יומי

## מתי להפעיל skill זה

| טריגר | פעולה |
|-------|-------|
| תחילת שיחה חדשה | בדיקת ענף + התחלת יום |
| "סגור יום", "סיום יום", "end of day" | תהליך סגירת יום מלא |
| "בוקר טוב", "התחלת עבודה", "start day" | בדיקת ענף + התחלת יום |

---

## תחילת יום — בדיקה אוטומטית

**הרץ בתחילת כל שיחה:**

```bash
git branch --show-current
```

### אם התוצאה היא `main`:

```bash
git checkout main
git pull origin main
git checkout -b work/$(date +%Y-%m-%d)
```

דווח למשתמש:
```
✅ נוצר ענף עבודה חדש: work/YYYY-MM-DD
אפשר להתחיל לעבוד.
```

### אם התוצאה היא ענף עבודה (לא main):

בדוק אם יש שינויים לא שמורים:
```bash
git status --porcelain
```

- אם יש שינויים → דווח: `⚠️ יש שינויים לא שמורים מאתמול על ענף [שם]. להמשיך?`
- אם אין שינויים → דווח: `✅ ממשיכים על ענף [שם]`

---

## סגירת יום — תהליך מלא

כשהמשתמש אומר "סגור יום" / "סיום יום" / "end of day":

### שלב 1 — עדכון מסמכים
```
עדכן את המסמכים הרלוונטיים:
- CHANGELOG.md (אם יש שינויים משמעותיים)
- docs/architecture.md (אם השתנתה ארכיטקטורה)
- docs/qa_scenarios.md (אם נוספו תרחישי בדיקה)
```

### שלב 2 — בדיקת build
```bash
npm run build
```

**אם נכשל:** עצור ודווח למשתמש. אל תמשיך לשלבים הבאים.

### שלב 3 — commit ו-push
```bash
git add .
git commit -m "[תיאור אוטומטי של השינויים]"
git push origin [שם-הענף-הנוכחי]
```

### שלב 4 — יצירת PR
```bash
gh pr create --title "[תיאור קצר]" --body "[תיאור השינויים]"
```

שמור את מספר ה-PR שנוצר.

### שלב 5 — המתנה ל-CI
```bash
gh pr checks [מספר-PR]
```

חכה עד שכל הבדיקות יסתיימו (בדוק כל 30 שניות, עד 5 דקות).

**אם CI נכשל:** דווח למשתמש ושאל אם לתקן או להשאיר ל-מחר.

### שלב 6 — מיזוג (רק אם CI ירוק)
```bash
gh pr merge [מספר-PR] --merge
```

### שלב 7 — ניקוי
```bash
git checkout main
git pull origin main
git branch -d [שם-הענף-שמוזג]
```

### שלב 8 — דיווח סיום
```
✅ סגירת יום הושלמה

📋 סיכום:
- קבצים שהשתנו: [מספר]
- PR: #[מספר] - [כותרת]
- CI: ירוק ✅
- מוזג ל-main: ✅
- ענף עבודה נמחק: ✅

מחר פשוט תפתח את הפרויקט ותתחיל לעבוד.
```

---

## חוקי ברזל

❌ **לעולם לא לדחוף ישירות ל-main**
❌ **לא למזג אם CI נכשל**
❌ **לא למחוק ענף לפני שמוזג**

✅ **תמיד לעבוד על ענף עבודה**
✅ **תמיד לחכות ל-CI לפני מיזוג**
✅ **תמיד לעדכן main אחרי מיזוג**

---

## פקודות עזר

| פקודה | מה עושה |
|-------|---------|
| `git branch --show-current` | מציג ענף נוכחי |
| `git status --porcelain` | בודק שינויים (פורמט מקוצר) |
| `gh pr list` | רואה PRs פתוחים |
| `gh pr checks [N]` | בודק סטטוס CI של PR |
| `gh pr merge [N] --merge` | ממזג PR |
