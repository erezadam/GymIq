# GymIQ - Product Requirements Document (PRD)

**גרסה:** 1.10.61
**תאריך עדכון:** 19 בינואר 2026
**סטטוס:** פעיל בייצור

---

## 1. מבוא ותיאור המוצר

### 1.1 סקירה כללית

**GymIQ** היא אפליקציית כושר חכמה (PWA) המיועדת למתאמנים פרטיים ומאמנים מקצועיים בשוק הישראלי. האפליקציה מספקת פתרון מקיף למעקב אימונים, תכנון תוכניות אימון, וניהול היסטוריית ביצועים.

### 1.2 חזון המוצר

לספק את הכלי המושלם למתאמנים ישראלים - אפליקציה פשוטה, מהירה וחכמה שמלווה את המתאמן בכל שלב, מתכנון האימון ועד מעקב ההתקדמות.

### 1.3 קהל יעד

| קטגוריה | תיאור | צרכים עיקריים |
|---------|-------|---------------|
| **מתאמנים מתחילים** | מחפשים הדרכה ומעקב בסיסי | ממשק פשוט, ספריית תרגילים מוסברת |
| **מתאמנים מתקדמים** | רוצים ניתוח מעמיק וגמישות | מעקב ביצועים, שיאים אישיים, התאמה אישית |
| **מאמנים אישיים** | ניהול לקוחות ותכנון אישי | (בתכנון) כלי ניהול לקוחות |
| **מנהלי מערכת** | ניהול תוכן ומשתמשים | פאנל אדמין מלא |

### 1.4 ערך ייחודי

- **עברית מלאה** - ממשק RTL מלא, שמות תרגילים ושרירים בעברית
- **PWA** - אפליקציה מותקנת ללא חנות אפליקציות
- **Auto-Save** - שמירה אוטומטית כל 2 שניות, ללא אובדן נתונים
- **Mobile-First** - עיצוב מותאם לטלפון כברירת מחדל

---

## 2. דרישות טכניות

### 2.1 סטאק טכנולוגי

| רכיב | טכנולוגיה | גרסה |
|------|-----------|------|
| **Framework** | React | 18.3.1 |
| **Language** | TypeScript | 5.x |
| **Build Tool** | Vite | 5.x |
| **State Management** | Zustand | 5.0.0 |
| **Server State** | TanStack Query | 5.60.0 |
| **Styling** | Tailwind CSS | 3.x |
| **Navigation** | React Router | 6.x |
| **Forms** | React Hook Form + Zod | - |
| **Backend** | Firebase | 10.14.1 |
| **Hosting** | Firebase Hosting | - |

### 2.2 שירותי Firebase

| שירות | שימוש |
|-------|-------|
| **Firebase Auth** | הרשמה והתחברות (Email/Password) |
| **Cloud Firestore** | מסד נתונים NoSQL בזמן אמת |
| **Firebase Hosting** | אירוח CDN עם SSL |
| **Cloud Storage** | אחסון קבצים (בעתיד) |

### 2.3 מבנה מסד הנתונים (Firestore Collections)

| Collection | תיאור | שדות עיקריים |
|------------|-------|--------------|
| `users` | פרופילי משתמשים | uid, name, phone, role |
| `exercises` | ספריית תרגילים | name, nameHe, category, primaryMuscle, equipment, imageUrl |
| `muscles` | קטגוריות שרירים | id, nameHe, nameEn, icon (URL), subMuscles[] |
| `equipment` | ציוד כושר | id, nameHe, nameEn |
| `workoutSessions` | אימונים פעילים | userId, exercises[], status, createdAt |
| `workoutHistory` | היסטוריית אימונים | userId, exercises[], calories, duration, totalVolume |
| `reportTypes` | סוגי דיווח לתרגילים | id, name, nameHe, fields[], isDefault |
| `appSettings` | הגדרות אפליקציה | externalComparisonUrl |

### 2.4 מבנה תיקיות

```
src/
├── app/
│   ├── router/          # AuthGuard, GuestGuard
│   └── store/           # Global stores
├── shared/
│   └── components/      # LoadingSpinner, MuscleIcon
├── design-system/
│   └── layouts/         # MainLayout
├── domains/
│   ├── admin/           # פאנל ניהול
│   ├── authentication/  # התחברות והרשמה
│   ├── dashboard/       # דשבורד ראשי
│   ├── exercises/       # ספריית תרגילים
│   └── workouts/        # מערכת אימונים
└── lib/
    └── firebase/        # Firebase services
```

---

## 3. פיצ'רים קיימים (מפורט)

### 3.1 סטטוס מימוש

| פיצ'ר | סטטוס | הערות |
|-------|-------|-------|
| **Authentication** | ✅ מומש | Email/Password דרך Firebase Auth |
| **Exercise Library** | ✅ מומש | ספריית תרגילים עם סינון וחיפוש |
| **Workout Builder** | ✅ מומש | בניית אימון, הוספת סטים |
| **Workout Session** | ✅ מומש | ביצוע אימון בזמן אמת |
| **Workout History** | ✅ מומש | היסטוריית אימונים בסיסית |
| **Admin Panel** | ✅ מומש | ניהול תרגילים ומשתמשים |
| **Progress Analytics** | ⏳ בתכנון | גרפים ומעקב התקדמות |
| **Trainer Features** | ⏳ בתכנון | ניהול לקוחות למאמנים |
| **Social Features** | ❌ לא התחיל | אתגרים, שיתוף |
| **AI Features** | ❌ לא התחיל | המלצות חכמות |

**מקרא:** ✅ מומש | ⏳ בתכנון/בפיתוח | ❌ לא התחיל

### 3.2 פירוט פיצ'רים מומשים

#### 3.2.1 מערכת הרשאות ואימות
- התחברות עם Email/Password
- שמירת מצב התחברות
- הפרדת הרשאות: User / Admin
- Guards לנתיבים מוגנים

#### 3.2.2 ספריית תרגילים
- חיפוש חופשי
- סינון לפי שריר ראשי
- סינון לפי ציוד
- סינון לפי קטגוריה
- כרטיסי תרגיל עם תמונה ומידע
- תמיכה בסוגי דיווח שונים (weight_reps, reps_only, time_only)

#### 3.2.3 בניית אימון (Workout Builder)
- בחירת תרגילים מהספרייה
- הגדרת תאריך (היום או עתידי)
- מעבר לאימון פעיל או שמירה כמתוכנן

#### 3.2.4 אימון פעיל (Active Workout)
- **קיבוץ תרגילים** - לפי שריר או לפי ציוד
- **דיווח סטים** - משקל, חזרות, זמן (לפי סוג הדיווח)
- **Auto-Save** - שמירה אוטומטית כל 2 שניות
- **Rest Timer** - טיימר מנוחה צף (toggle)
- **הערות לתרגיל** - הערות טקסט + הערות היסטוריות
- **נתוני אימון קודם** - הצגת ביצוע קודם לכל תרגיל
- **התרעת תרגילים לא הושלמו** - פופאפ לפני סיום
- **סיכום אימון** - פופאפ עם סטטיסטיקות וקלט קלוריות

#### 3.2.5 היסטוריית אימונים
- רשימת כל האימונים
- סינון לפי סטטוס (הושלם, בתהליך, מתוכנן, ללא דיווח)
- כרטיסי אימון עם: זמן, תרגילים, סטים, שרירים שעובדו
- המשך אימון in_progress
- מחיקת אימון

#### 3.2.6 פאנל אדמין
- **ניהול תרגילים** - CRUD מלא, פילטרים, תיקון קטגוריות
- **ניהול שרירים** - הוספה/עריכה של שרירים ותתי-שרירים
- **ניהול ציוד** - CRUD לציוד כושר
- **ניהול משתמשים** - רשימת משתמשים ותפקידים
- **ניהול סוגי דיווח** - סוגי דיווח מותאמים אישית
- **הגדרות אפליקציה** - URL להשוואה בינלאומית

#### 3.2.7 PWA ועדכונים
- Service Worker עם cache busting
- באנר עדכון גרסה
- התקנה למסך הבית
- כפתור רענון גרסה ידני

---

## 4. UI/UX ועיצוב

### 4.1 עקרונות יסוד

| עיקרון | פירוט |
|--------|-------|
| **Mobile First** | כל עיצוב מתחיל ב-375px |
| **RTL** | כל הטקסטים בעברית, כיוון מימין לשמאל |
| **Tailwind Only** | אין CSS מותאם אישית |
| **Touch Targets** | מינימום 44x44px לכל אלמנט לחיץ |

### 4.2 Breakpoints

```javascript
'xs': '375px',   // iPhone SE - ברירת מחדל
'sm': '640px',   // Tablet portrait
'md': '768px',   // Tablet landscape
'lg': '1024px',  // Desktop
```

### 4.3 סכמת צבעים (Neon Dark Theme)

```javascript
// צבעי בסיס
neon: {
  dark: '#0a0a0a',      // רקע ראשי
  blue: '#00BFFF',      // הדגשה ראשית
  cyan: '#00FFFF',      // הדגשה משנית
  green: '#00FF7F',     // הצלחה/פעולה
}

// גווני אפור
'neon-gray': {
  400: '#9CA3AF',       // טקסט משני
  500: '#6B7280',       // טקסט מושתק
  600: '#4B5563',       // גבולות
  700: '#374151',       // רקע כרטיסים
  800: '#1F2937',       // רקע משני
  900: '#111827',       // רקע כהה
}

// צבעי סטטוס אימון
workout: {
  completed: '#10B981', // הושלם - ירוק
  inProgress: '#FFB020', // בתהליך - צהוב
  planned: '#3B82F6',   // מתוכנן - כחול
}
```

### 4.4 טיפוגרפיה

| סוג | גודל | שימוש |
|-----|------|-------|
| כותרת ראשית | `text-xl font-bold` | כותרת מסך |
| כותרת משנית | `text-lg font-semibold` | כותרת סקציה |
| טקסט רגיל | `text-base` | תוכן |
| טקסט קטן | `text-sm` | תיאורים |
| טקסט זעיר | `text-xs` | מטא-דאטה |

### 4.5 קומפוננטות עיקריות

- **MuscleIcon** - תצוגת אייקוני שרירים מ-URL
- **RestTimer** - טיימר מנוחה צף
- **WorkoutSummaryModal** - פופאפ סיכום אימון
- **ConfirmationModal** - מודל אישור כללי
- **NotesModal** - הערות לתרגילים

---

## 5. דרישות ביצועים ואבטחה

### 5.1 יעדי ביצועים

| מטריקה | יעד |
|--------|-----|
| **Page Load Time** | < 2 שניות ב-3G |
| **First Contentful Paint** | < 1.5 שניות |
| **Time to Interactive** | < 3 שניות |
| **Bundle Size** | < 150KB initial load |
| **API Response Time** | < 200ms average |

### 5.2 אבטחה

| תחום | מימוש |
|------|-------|
| **אימות** | Firebase Auth עם JWT |
| **הרשאות** | Firestore Security Rules |
| **HTTPS** | מובנה ב-Firebase Hosting |
| **Data Isolation** | כל משתמש רואה רק את הנתונים שלו |
| **Admin Protection** | בדיקת role ב-Guards וב-Rules |

### 5.3 Firestore Security Rules (עיקרי)

```javascript
// User data isolation
userProfile: "auth.uid == resource.data.userId"

// Public data (exercises)
publicData: "true for authenticated users"

// Admin-only data
adminData: "hasRole('admin')"
```

---

## 6. אתגרים טכניים מזוהים

### 6.1 באגים שתוקנו ויציבים

| ID | תיאור | סטטוס |
|----|-------|-------|
| B05 | WorkoutSummaryModal נעלם | ✅ נבדק אוטומטית |
| B06 | כפתור מחיקת אימון נעלם | ✅ נבדק אוטומטית |
| B07 | קלוריות לא נשמרות | ✅ נבדק אוטומטית |
| B08 | Race condition בטעינת נתונים | ✅ נבדק אוטומטית |
| B12 | שמות שרירים באנגלית | ✅ תוקן עם getMuscleNameHe |
| B13 | PWA לא מתעדכן | ✅ תוקן עם prebuild script |
| B14 | הערות תרגיל לא מוצגות | ✅ תוקן |
| B15 | סטטוס תרגילים לא נשמר בהמשך אימון | ✅ תוקן |
| B16 | כפל אימונים בהיסטוריה | ✅ תוקן |
| B17 | קטגוריות באנגלית בפילטרים | ✅ תוקן |

### 6.2 נקודות תשומת לב

- **Race Conditions** - שימוש ב-isInitializing ref למניעת קריאות מקבילות
- **PWA Cache** - סנכרון CACHE_VERSION עם version.json בכל deploy
- **Dynamic Mapping** - כל שמות השרירים מגיעים מ-Firebase, לא hardcoded
- **Mobile Touch** - שימוש ב-active במקום hover

---

## 7. מפת דרך עתידית

### 7.1 שלב 1 - שיפורי UX (קרוב)

| פיצ'ר | תיאור | עדיפות |
|-------|-------|--------|
| **גרפי התקדמות** | גרפים של משקל/חזרות לאורך זמן | גבוהה |
| **שיאים אישיים** | מעקב PR לכל תרגיל | גבוהה |
| **יצוא נתונים** | יצוא היסטוריה ל-CSV | בינונית |

### 7.2 שלב 2 - פיצ'רים למאמנים (תכנון)

| פיצ'ר | תיאור |
|-------|-------|
| **ניהול לקוחות** | רשימת לקוחות, יצירת תוכניות |
| **שיתוף אימונים** | שליחת תוכנית אימון ללקוח |
| **מעקב לקוחות** | צפייה בהיסטוריית אימונים של לקוחות |

### 7.3 שלב 3 - פיצ'רים מתקדמים (עתיד)

| פיצ'ר | תיאור |
|-------|-------|
| **AI Recommendations** | המלצות חכמות לתרגילים |
| **Social Features** | אתגרים, לוחות תוצאות |
| **Wearables Integration** | חיבור לשעונים חכמים |
| **Video Analysis** | ניתוח טכניקה מוידאו |

---

## 8. זרימות משתמש עיקריות

### 8.1 זרימת יצירת אימון חדש

```
דשבורד
  └→ "התחל אימון"
      └→ ספריית תרגילים (בחירה)
          └→ בניית אימון
              ├→ [תאריך היום] → אימון פעיל
              └→ [תאריך עתידי] → היסטוריה (planned)
```

### 8.2 זרימת ביצוע אימון

```
אימון פעיל
  └→ בחירת תרגיל
      └→ דיווח סט (משקל/חזרות)
          └→ [Auto-Save כל 2 שניות]
              └→ סיום תרגיל
                  └→ ... (תרגילים נוספים)
                      └→ "סיום אימון"
                          └→ [התרעה אם יש תרגילים לא הושלמו]
                              └→ פופאפ סיכום
                                  └→ שמירה → היסטוריה
```

### 8.3 זרימת המשך אימון

```
היסטוריה
  └→ כרטיס אימון (in_progress)
      └→ "המשך אימון"
          └→ אימון פעיל (עם כל הנתונים הקיימים)
```

### 8.4 זרימת ניהול תרגילים (Admin)

```
Admin Panel
  └→ תרגילים
      ├→ רשימת תרגילים (פילטרים, חיפוש)
      ├→ "תרגיל חדש" → טופס הוספה
      ├→ "עריכה" → טופס עריכה
      └→ "תקן קטגוריות" → תיקון batch
```

---

## 9. מטריקות הצלחה

### 9.1 מטריקות טכניות

| מטריקה | יעד | כלי מדידה |
|--------|-----|-----------|
| **Page Load** | < 2s | Firebase Performance |
| **Error Rate** | < 1% | Console monitoring |
| **Crash Rate** | < 0.1% | Firebase Crashlytics |
| **PWA Install Rate** | > 30% | Analytics |

### 9.2 מטריקות עסקיות (עתיד)

| מטריקה | תיאור |
|--------|-------|
| **DAU** | Daily Active Users |
| **Session Duration** | זמן שימוש ממוצע |
| **Workout Completion Rate** | אחוז אימונים שהושלמו |
| **Feature Adoption** | שימוש בפיצ'רים חדשים |
| **Retention Rate** | שימור משתמשים |

### 9.3 בדיקות אוטומטיות

הבדיקות ב-`tests/critical.spec.ts` מכסות:
- קיום כפתור מחיקת אימון
- קיום WorkoutSummaryModal
- שמירת שדה calories
- קיום getInProgressWorkout

---

## נספחים

### נספח א' - נתיבים (Routes)

#### נתיבי משתמש (Protected)

| נתיב | קומפוננטה |
|------|-----------|
| `/dashboard` | UserDashboard |
| `/exercises` | ExerciseLibrary |
| `/workout/new` | ExerciseLibrary |
| `/workout/builder` | WorkoutBuilder |
| `/workout/session` | ActiveWorkoutScreen |
| `/workout/history` | WorkoutHistory |
| `/personal-records` | PersonalRecords |

#### נתיבי אדמין

| נתיב | קומפוננטה |
|------|-----------|
| `/admin/exercises` | ExerciseList |
| `/admin/exercises/new` | ExerciseForm |
| `/admin/exercises/:id/edit` | ExerciseForm |
| `/admin/muscles` | MuscleManager |
| `/admin/equipment` | EquipmentManager |
| `/admin/users` | UsersList |
| `/admin/report-types` | ReportTypeManager |
| `/admin/settings` | AdminSettings |

### נספח ב' - סוגי סטטוס אימון

| סטטוס | צבע | תיאור |
|-------|-----|-------|
| `planned` | כחול | אימון מתוכנן לעתיד |
| `in_progress` | צהוב | אימון בתהליך |
| `completed` | ירוק | אימון שהושלם |
| `cancelled` | אפור | ללא דיווח |

### נספח ג' - סוגי דיווח תרגילים

| סוג | שדות | דוגמה |
|-----|------|-------|
| `weight_reps` | משקל + חזרות | לחיצת חזה |
| `reps_only` | חזרות בלבד | מתח |
| `time_only` | זמן בלבד | פלאנק |
| `reps_time` | חזרות + זמן | מתיחות |

---

```
═══════════════════════════════════════════════════════════════════════════════
מסמך זה נוצר אוטומטית מתיעוד הפרויקט
עדכון אחרון: 19/01/2026
גרסת מוצר: 1.10.61
═══════════════════════════════════════════════════════════════════════════════
```
