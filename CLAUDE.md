# CLAUDE.md – GymIQ Control File

```
╔══════════════════════════════════════════════════════════════════════════════╗
║                                                                              ║
║   🚨 הנחיה ראשונה לכל סשן - חובה!                                            ║
║                                                                              ║
║   הפעל: start                                                                ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝
```

מסמך שליטה עליון - חובה לקרוא לפני כל פעולה.

---

## 1. מצבי עבודה

| מצב | תיאור | מותר | אסור |
|-----|-------|------|------|
| **Builder** | כתיבת קוד | כתיבה, עריכה, יצירת קבצים | שינוי מסמכי תיעוד |
| **Reviewer** | סקירה בלבד | קריאה, הערות, דיווח | שינוי קוד או מסמכים |
| **Documentation** | עדכון תיעוד | עריכת MD files | שינוי קוד מקור |

---

## 2. פורמט פתיחת סשן (חובה!)

כל סשן חייב להתחיל בהצהרה:

```
✅ קראתי את CLAUDE.md
---
מצב: [Builder/Reviewer/Documentation]
משימה: [תיאור קצר]
קבצים שישתנו: [רשימה]
קבצים תלויים: [קבצים שמשתמשים בקבצים שישתנו]
זרימת משתמש: דשבורד → [מסך 1] → [מסך 2] → [יעד]
---
```

**אם הסוכן לא פתח בפורמט הזה - להזכיר לו להפעיל start!**

---

## 3. עקרונות יסוד

| עיקרון | פירוט |
|--------|-------|
| **Mobile First** | כל פיתוח נבדק קודם במסך 375px |
| **אין ניחושים** | לא ברור? סמן TBD ושאל |
| **אין Feature Complete בלי בדיקות** | לא לדווח "סיימתי" בלי לבדוק |
| **מקור אמת אחד** | עיצוב רק מ-tailwind.config.js |

---

## 4. מניעת רגרסיה - חוקי ברזל

### לקחים מהעבר:
- **Date Picker נעלם** - שינוי ניווט דילג על מסך עם פיצ'ר
- **צבעים לא עובדים** - שמות classes לא תאמו ל-tokens

### לפני כל שינוי:
```bash
# מפה תלויות
grep -r "ComponentName" src/

# מפה זרימה
דשבורד → [?] → [?] → [יעד]

# ודא class קיים
grep -r "class-name" tailwind.config.js
```

### אחרי כל שינוי:
- בדיקת E2E מהדשבורד
- בדיקה ויזואלית במובייל
- אין שגיאות בקונסול

---

## 5. רמות אישור

### Level 1: Safe (ללא אישור)
- קריאת קבצים
- npm run build / lint
- הרצת בדיקות

### Level 2: Guarded (דיווח לפני ואחרי)
- שינוי Store
- שינוי Types
- שינוי ניווט
- מחיקת קוד מעל 20 שורות

### Level 3: Restricted (אישור מפורש)
- שינוי קבצי config
- הוספת/הסרת dependencies
- פעולות Firebase/Production

## בדיקת נתונים - לא רק UI!

כשמפתחים מסך שמציג נתונים:
1. ודא שיש נתונים אמיתיים ב-Firebase לפני הבדיקה
2. בדוק שהנתונים מופיעים על המסך (לא רק שהמסך נטען)
3. אם מציג "אין נתונים" - ודא שבאמת אין נתונים

❌ "המסך עובד" = לא מספיק
✅ "המסך מציג נתונים אמיתיים" = הצלחה
```

---

## 🔧 הנחיה לתיקון
```
קרא את קובץ CLAUDE.md בתיקיית הפרויקט והצהר שקראת אותו לפני שתתחיל לעבוד.

================================================================================
🚨 באג: מסך PR לא מציג נתונים
================================================================================

הבעיה:
- יש אימונים בהיסטוריה עם סטים מדווחים
- מסך PR מציג "עדיין אין שיאים" ו-0 בקוביות

תחקיר (לפני תיקון):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. בדוק מאיפה המסך שולף נתונים:
   - איזה collection ב-Firebase?
   - איזה query?
   - הוסף console.log לראות מה חוזר

2. בדוק אם יש נתונים ב-Firebase:
   - workoutHistory / workoutSessions?
   - האם יש סטים עם משקל וחזרות?

3. בדוק את הלוגיקה:
   - האם הפילטור נכון?
   - האם ה-userId נכון?

הראה לי:
- את ה-query שאתה מריץ
- את התוצאה (console.log)
- את מבנה הנתונים ב-Firebase

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

בדיקות אחרי התיקון:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

תנאי קדם: ודא שיש אימון בהיסטוריה עם סטים!

□ קוביית "תרגילים שונים" מציגה מספר > 0
□ רשימת תרגילים מופיעה (לא "עדיין אין שיאים")
□ כל תרגיל מציג: שם, משקל, חזרות, תאריך
□ הנתונים תואמים למה שיש בהיסטוריה

================================================================================---

## 6. צ'קליסט סיום משימה

```
□ פונקציונלי:
  □ הפיצ'ר החדש עובד
  □ פיצ'רים קיימים לא נשברו
  □ הזרימה המלאה עובדת

□ טכני:
  □ אין שגיאות בקונסול
  □ אין שגיאות TypeScript
  □ classes קיימים ב-tokens

□ ויזואלי:
  □ נבדק במובייל (375px)
  □ RTL תקין
  □ צבעים נכונים
```

---

## 7. איסורים מוחלטים

❌ לא ליצור קבצי CSS חדשים
❌ לא לשנות tailwind.config.js בלי אישור
❌ לא להשתמש ב-any
❌ לא להוסיף dependencies בלי אישור
❌ לא לשנות ניווט בלי למפות זרימה
❌ לא להשתמש ב-class שלא קיים ב-tokens
❌ לא לדווח "סיימתי" בלי בדיקה אמיתית

---

## 8. קישורים למסמכים

- [architecture.md](./architecture.md) - מבנה טכני
- [style_and_ui.md](./style_and_ui.md) - עיצוב וסגנון
- [qa_scenarios.md](./qa_scenarios.md) - תרחישי בדיקה
- [skills.md](./skills.md) - פקודות זמינות

---

```
══════════════════════════════════════════════════════════════════════════════
סוף המסמך - כל שינוי דורש אישור מפורש
══════════════════════════════════════════════════════════════════════════════
```
