# CLAUDE.md – GymIQ Control File

```
╔══════════════════════════════════════════════════════════════════════════════╗
║                                                                              ║
║   🚨 הנחיה ראשונה לכל סשן - חובה!                                            ║
║                                                                              ║
║   הפעל: start                                                                ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝
```

מסמך שליטה עליון - חובה לקרוא לפני כל פעולה.

---

## 1. מצבי עבודה

| מצב | תיאור | מותר | אסור |
|-----|-------|------|------|
| **Builder** | כתיבת קוד | כתיבה, עריכה, יצירת קבצים | שינוי מסמכי תיעוד |
| **Reviewer** | סקירה בלבד | קריאה, הערות, דיווח | שינוי קוד או מסמכים |
| **Documentation** | עדכון תיעוד | עריכת MD files | שינוי קוד מקור |

---

## 2. פורמט פתיחת סשן (חובה!)

כל סשן חייב להתחיל בהצהרה:

```
✅ קראתי את CLAUDE.md
---
מצב: [Builder/Reviewer/Documentation]
משימה: [תיאור קצר]
קבצים שישתנו: [רשימה]
קבצים תלויים: [קבצים שמשתמשים בקבצים שישתנו]
זרימת משתמש: דשבורד → [מסך 1] → [מסך 2] → [יעד]
---
```

**אם הסוכן לא פתח בפורמט הזה - להזכיר לו להפעיל start!**

---

## 3. עקרונות יסוד

| עיקרון | פירוט |
|--------|-------|
| **Mobile First** | כל פיתוח נבדק קודם במסך 375px |
| **אין ניחושים** | לא ברור? סמן TBD ושאל |
| **אין Feature Complete בלי בדיקות** | לא לדווח "סיימתי" בלי לבדוק |
| **מקור אמת אחד** | עיצוב רק מ-tailwind.config.js |

---

## 4. מניעת רגרסיה - חוקי ברזל 🚨

### רגרסיות שקרו בעבר:
| תאריך | מה נשבר | למה | איך למנוע |
|-------|---------|-----|-----------|
| 09/01 | קלוריות לא מוצגות בהיסטוריה | קוד תצוגה השתמש ב-estimateCalories() במקום workout.calories | לבדוק שקוד תצוגה משתמש בנתונים השמורים |
| 08/01 | פופאפ סיכום אימון + קלוריות נעלם | שוחזר - WorkoutSummaryModal קיים ועובד | ✅ תוקן |
| 06/01 | כפתור מחיקת אימון נעלם | הסרת קוביות סטטיסטיקה מחקה גם JSX סמוך | לרשום מה חייב להישאר |
| 05/01 | Navigation bar נעלם | שינוי מבנה פגע במספר מסכים | למפות כל השימושים |
| 03/01 | שדה Volume נמחק | הסרת UI מחקה גם לוגיקה | להפריד UI מלוגיקה |

### ⚠️ לפני שינוי "פשוט" של UI:

```
┌─────────────────────────────────────────────────────────────┐
│  שאלות חובה לפני מחיקת/שינוי קוד:                          │
│                                                             │
│  1. האם יש כפתורים/פיצ'רים באותו אזור שאסור למחוק?         │
│  2. האם יש event handlers שקשורים לקוד הזה?                │
│  3. מה עוד משתמש בקומפוננטה/פונקציה הזו?                   │
│                                                             │
│  אם לא בטוח - שאל לפני שמוחק!                              │
└─────────────────────────────────────────────────────────────┘
```

### פיצ'רים קריטיים - לא למחוק בשום מצב:

| מסך | פיצ'ר | קומפוננטה/פונקציה |
|-----|-------|-------------------|
| תוכנית אימונים | כפתור מחיקה (🗑) | handleDeleteWorkout, Trash2 icon |
| תוכנית אימונים | הרחבה/כיווץ כרטיס | onClick expand |
| אימון פעיל | הוספת סט (+) | handleAddSet |
| אימון פעיל | טיימר | useTimer hook |
| בחירת תרגילים | Date Picker | scheduledDate state |
| **סיום אימון** | **פופאפ סיכום + קלוריות** | **WorkoutSummaryModal** |

### לפני כל שינוי:
```bash
# 1. מפה תלויות
grep -r "ComponentName" src/

# 2. צור גיבוי
cp filename.tsx filename.tsx.backup

# 3. מפה זרימה
דשבורד → [?] → [?] → [יעד]

# 4. ודא class קיים
grep -r "class-name" tailwind.config.js
```

### אחרי כל שינוי - בדיקות חובה:
```
□ הפיצ'ר החדש/המשונה עובד
□ כל הכפתורים במסך עדיין עובדים
□ הזרימה מהדשבורד עובדת
□ בדיקה ויזואלית במובייל 375px
□ אין שגיאות בקונסול
□ עברתי על qa_scenarios.md לסעיף הרלוונטי
```

---

## 5. רמות אישור

### Level 1: Safe (ללא אישור)
- קריאת קבצים
- npm run build / lint
- הרצת בדיקות

### Level 2: Guarded (דיווח לפני ואחרי)
- שינוי Store
- שינוי Types
- שינוי ניווט
- מחיקת קוד מעל 20 שורות

### Level 3: Restricted (אישור מפורש)
- שינוי קבצי config
- הוספת/הסרת dependencies
- פעולות Firebase/Production

---

## 6. בדיקת נתונים - לא רק UI!

כשמפתחים מסך שמציג נתונים:
1. ודא שיש נתונים אמיתיים ב-Firebase לפני הבדיקה
2. בדוק שהנתונים מופיעים על המסך (לא רק שהמסך נטען)
3. אם מציג "אין נתונים" - ודא שבאמת אין נתונים

❌ "המסך עובד" = לא מספיק
✅ "המסך מציג נתונים אמיתיים" = הצלחה

---

## 7. צ'קליסט סיום משימה

```
□ פונקציונלי:
  □ הפיצ'ר החדש עובד
  □ פיצ'רים קיימים לא נשברו
  □ הזרימה המלאה עובדת

□ טכני:
  □ אין שגיאות בקונסול
  □ אין שגיאות TypeScript
  □ classes קיימים ב-tokens

□ ויזואלי:
  □ נבדק במובייל (375px)
  □ RTL תקין
  □ צבעים נכונים

□ רגרסיה:
  □ עברתי על qa_scenarios.md
  □ כל הכפתורים במסך עובדים
  □ לא מחקתי קוד שלא קשור למשימה
```

---

## 8. איסורים מוחלטים

❌ לא ליצור קבצי CSS חדשים
❌ לא לשנות tailwind.config.js בלי אישור
❌ לא להשתמש ב-any
❌ לא להוסיף dependencies בלי אישור
❌ לא לשנות ניווט בלי למפות זרימה
❌ לא להשתמש ב-class שלא קיים ב-tokens
❌ לא לדווח "סיימתי" בלי בדיקה אמיתית
❌ לא למחוק קוד שלא קשור ישירות למשימה

---

## 9. קישורים למסמכים

- [architecture.md](./architecture.md) - מבנה טכני
- [style_and_ui.md](./style_and_ui.md) - עיצוב וסגנון
- [qa_scenarios.md](./qa_scenarios.md) - תרחישי בדיקה ⚠️ חובה!
- [skills.md](./skills.md) - פקודות זמינות

---

```
══════════════════════════════════════════════════════════════════════════════
עדכון אחרון: 09/01/2026
סוף המסמך - כל שינוי דורש אישור מפורש
══════════════════════════════════════════════════════════════════════════════
```
