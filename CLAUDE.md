# CLAUDE.md – GymIQ Control File

```
╔══════════════════════════════════════════════════════════════════════════════╗
║                                                                              ║
║   🚨 הנחיה ראשונה לכל סשן - חובה!                                            ║
║                                                                              ║
║   הפעל: start                                                                ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝
```

מסמך שליטה עליון - חובה לקרוא לפני כל פעולה.

---

## 1. מצבי עבודה

| מצב | תיאור | מותר | אסור |
|-----|-------|------|------|
| **Builder** | כתיבת קוד | כתיבה, עריכה, יצירת קבצים | שינוי מסמכי תיעוד |
| **Reviewer** | סקירה בלבד | קריאה, הערות, דיווח | שינוי קוד או מסמכים |
| **Documentation** | עדכון תיעוד | עריכת MD files | שינוי קוד מקור |

---

## 2. פורמט פתיחת סשן (חובה!)

כל סשן חייב להתחיל ב:

### שלב 1: קריאת קבצי תיעוד (חובה!)
```
📖 קרא את הקבצים הבאים לפני כל פעולה:
   1. CLAUDE.md (קובץ זה)
   2. CHANGELOG.md (לדעת גירסה נוכחית ומה השתנה לאחרונה)
```

### שלב 2: הצהרת פתיחה
```
✅ קראתי את CLAUDE.md
✅ קראתי את CHANGELOG.md - גירסה נוכחית: [X.X.X]
---
מצב: [Builder/Reviewer/Documentation]
משימה: [תיאור קצר]
קבצים שישתנו: [רשימה]
קבצים תלויים: [קבצים שמשתמשים בקבצים שישתנו]
זרימת משתמש: דשבורד → [מסך 1] → [מסך 2] → [יעד]
---
```

**אם הסוכן לא פתח בפורמט הזה - להזכיר לו להפעיל start!**

---

## 3. עקרונות יסוד

| עיקרון | פירוט |
|--------|-------|
| **Mobile First** | כל פיתוח נבדק קודם במסך 375px |
| **אין ניחושים** | לא ברור? סמן TBD ושאל |
| **אין Feature Complete בלי בדיקות** | לא לדווח "סיימתי" בלי לבדוק |
| **מקור אמת אחד** | עיצוב רק מ-tailwind.config.js |
| **בדיקת נתונים** | לא רק UI - ודא שנתונים אמיתיים מופיעים |
| **גיבוי תמידי** | כל שינוי = Git commit מיידי |
| **הסוכן מבצע - לא המשתמש** | הסוכן עושה את הבדיקות והעדכונים בעצמו! |

---

## 4. 🔒 גיבוי Git - חוק ברזל!

```
╔══════════════════════════════════════════════════════════════════════════════╗
║  ⚠️  אחרי כל שינוי קוד - חובה לבצע Git Commit!                              ║
║      אין יוצאים מן הכלל. בלי גיבוי = בלי להמשיך.                             ║
╚══════════════════════════════════════════════════════════════════════════════╝
```

### מה חייב להיות מגובה:

| סוג | דוגמאות | תדירות גיבוי |
|-----|---------|--------------|
| **קוד מקור** | קומפוננטות, הוקים, סרביסים | אחרי כל שינוי |
| **נתוני תרגילים** | exercises.json, תמונות תרגילים | אחרי כל עדכון |
| **תצורה** | config files, environment | אחרי כל שינוי |
| **סטיילינג** | tailwind.config.js, CSS tokens | אחרי כל שינוי |
| **CHANGELOG.md** | היסטוריית שינויים | **חובה בסוף כל סשן!** |
| **תיעוד אחר** | README, architecture.md | אחרי עדכון משמעותי |

### פורמט הודעת Commit (חובה!):

```bash
git add .
git commit -m "[סוג]: תיאור קצר

פירוט השינויים:
- [שינוי 1]
- [שינוי 2]

קבצים שהשתנו:
- [קובץ 1]
- [קובץ 2]"
```

### סוגי Commit:

| תג | שימוש |
|----|-------|
| `feat` | פיצ'ר חדש |
| `fix` | תיקון באג |
| `style` | שינויי עיצוב |
| `data` | עדכון נתונים (תרגילים, תמונות) |
| `refactor` | שיפור קוד ללא שינוי התנהגות |
| `docs` | עדכון תיעוד |
| `config` | שינוי הגדרות |

### דוגמאות:

```bash
# עדכון תמונות תרגילים
git commit -m "data: עדכון תמונות תרגילים לקבוצת חזה

פירוט השינויים:
- הוספת 5 תמונות חדשות לתרגילי חזה
- עדכון נתיבים ב-exercises.json
- תיקון תמונה שבורה ל-bench press

קבצים שהשתנו:
- src/data/exercises.json
- public/images/exercises/chest/*"

# תיקון באג
git commit -m "fix: תיקון טעינת תמונות בדף תרגיל

פירוט השינויים:
- תיקון נתיב שגוי לתמונות
- הוספת fallback לתמונה חסרה

קבצים שהשתנו:
- src/components/ExerciseCard.tsx"
```

### תהליך עבודה עם Git:

```bash
# 1. לפני תחילת עבודה - ודא שאתה מעודכן
git pull origin main

# 2. אחרי כל שינוי משמעותי
git add .
git commit -m "[סוג]: תיאור"

# 3. לפני סיום סשן - עדכן CHANGELOG.md!
# (ראה סעיף 8)

# 4. Commit אחרון כולל CHANGELOG
git add .
git commit -m "docs: עדכון CHANGELOG לגירסה X.X.X"

# 5. דחוף לשרת
git push origin main

# 6. אם יש קונפליקט - דווח מיד!
```

### ❌ אסור בהחלט:

- לא לצבור שינויים רבים ב-commit אחד
- לא להשאיר שינויים לא מגובים בסוף סשן
- לא לכתוב הודעות commit גנריות ("fix", "update", "changes")
- לא למחוק קבצים בלי commit קודם

---

## 5. מניעת רגרסיה - חוקי ברזל

### לקחים מהעבר:
- **Date Picker נעלם** - שינוי ניווט דילג על מסך עם פיצ'ר
- **צבעים לא עובדים** - שמות classes לא תאמו ל-tokens
- **נתונים לא מופיעים** - המסך נטען אבל לא בדקנו שיש data
- **תמונות אבדו** - שינויים לא גובו ב-Git
- **סוכן לא סיים** - השאיר "בדיקות נדרשות" בלי לבצע

### לפני כל שינוי:
```bash
# מפה תלויות
grep -r "ComponentName" src/

# מפה זרימה
דשבורד → [?] → [?] → [יעד]

# ודא class קיים
grep -r "class-name" tailwind.config.js

# ודא שאתה מעודכן
git status
git pull origin main
```

### אחרי כל שינוי:
- ✅ Git commit עם הודעה מפורטת
- בדיקת E2E מהדשבורד
- בדיקה ויזואלית במובייל
- אין שגיאות בקונסול
- נתונים אמיתיים מופיעים (לא רק UI)

---

## 6. רמות אישור

### Level 1: Safe (ללא אישור)
- קריאת קבצים
- npm run build / lint
- הרצת בדיקות
- git status / git log

### Level 2: Guarded (דיווח לפני ואחרי)
- שינוי Store
- שינוי Types
- שינוי ניווט
- מחיקת קוד מעל 20 שורות
- עדכון נתוני תרגילים

### Level 3: Restricted (אישור מפורש)
- שינוי קבצי config
- הוספת/הסרת dependencies
- פעולות Firebase/Production
- מחיקת תמונות או assets

---

## 7. צ'קליסט סיום משימה

```
□ גיבוי (חובה ראשון!):
  □ git add . בוצע
  □ git commit עם הודעה מפורטת
  □ CHANGELOG.md עודכן
  □ git push (בסוף סשן)

□ פונקציונלי:
  □ הפיצ'ר החדש עובד
  □ פיצ'רים קיימים לא נשברו
  □ הזרימה המלאה עובדת
  □ נתונים אמיתיים מופיעים (לא רק UI)
  □ תמונות תרגילים נטענות

□ טכני:
  □ אין שגיאות בקונסול
  □ אין שגיאות TypeScript
  □ classes קיימים ב-tokens

□ ויזואלי:
  □ נבדק במובייל (375px)
  □ RTL תקין
  □ צבעים נכונים

□ תיעוד:
  □ CHANGELOG.md עודכן (אם יש שינוי משמעותי)
```

---

## 8. עדכון CHANGELOG (חובה בסוף סשן!)

```
⚠️  CHANGELOG.md חייב להתעדכן לפני ה-push האחרון!
    זה חלק בלתי נפרד מתהליך הגיבוי.
    הסוכן מעדכן את הקובץ - לא משאיר למשתמש!
```

אחרי כל סשן עם שינויים משמעותיים:

1. **קרא את CHANGELOG.md** (כבר קראת בתחילת הסשן - עכשיו עדכן!)
2. הוסף תחת הגירסה הנוכחית:
   - 🚀 פיצ'רים חדשים
   - 🐛 תיקוני באגים
   - 📸 עדכוני נתונים/תמונות
   - ✏️ קבצים שהשתנו
3. אם זו גירסה חדשה - צור סקציה חדשה **לפי התבנית בקובץ**
4. עדכן את ה-Git Commit אם רלוונטי

**❌ לא לדווח "סיימתי" בלי לעדכן CHANGELOG!**

---

## 9. 🚨 פורמט סיום סשן - חובה!

```
╔══════════════════════════════════════════════════════════════════════════════╗
║  הסוכן חייב לבצע את כל הפעולות בעצמו - לא להשאיר למשתמש!                     ║
╚══════════════════════════════════════════════════════════════════════════════╝
```

### ❌ אסור לסיים סשן עם:

| משפט אסור | למה זה בעייתי |
|-----------|---------------|
| "בדיקות נדרשות:" | הסוכן צריך לבצע, לא לרשום רשימה |
| "תבדוק ש..." | הסוכן בודק, לא המשתמש |
| "יש לעדכן CHANGELOG" | הסוכן מעדכן בעצמו |
| "נותר לעשות:" | הסוכן משלים הכל |
| "המשתמש צריך..." | הסוכן עושה |

### ✅ חובה לסיים סשן עם:

```
## ✅ סיום סשן

### בדיקות שבוצעו:
- [x] בדיקה 1 - עבר ✅
- [x] בדיקה 2 - עבר ✅
- [x] בדיקה 3 - עבר ✅

### CHANGELOG עודכן:
- הוספתי לגירסה [X.X.X]:
  - 🚀 [פיצ'ר חדש]
  - 🐛 [תיקון]

### Git:
- Commit: "[סוג]: תיאור"
- Push: בוצע ✅

### סטטוס: הושלם ✅
```

### דוגמה נכונה:

```
## ✅ סיום סשן

### בדיקות שבוצעו:
- [x] הפקד מופיע ליד הכותרת - עבר ✅
- [x] ברירת מחדל: כבוי (צבע אפור) - עבר ✅
- [x] לחיצה על הפקד משנה צבע לציאן - עבר ✅
- [x] Touch target 44px - עבר ✅
- [x] אין שגיאות בקונסול - עבר ✅

### CHANGELOG עודכן:
- הוספתי לגירסה 1.1.0:
  - 🚀 Rest Timer toggle באימון פעיל

### Git:
- Commit: "feat: הוספת Rest Timer toggle"
- Push: בוצע ✅

### סטטוס: הושלם ✅
```

### דוגמה לא נכונה (אסור!):

```
## סיכום השינויים:
- הוספתי Timer icon
- הוספתי state חדש

## בדיקות נדרשות:    ← ❌ אסור! הסוכן צריך לבצע
- הפקד מופיע
- Touch target 44px

> תבדוק שהכל עובד ואז תעדכן את CHANGELOG  ← ❌ אסור!
```

---

## 10. איסורים מוחלטים

❌ לא ליצור קבצי CSS חדשים
❌ לא לשנות tailwind.config.js בלי אישור
❌ לא להשתמש ב-any
❌ לא להוסיף dependencies בלי אישור
❌ לא לשנות ניווט בלי למפות זרימה
❌ לא להשתמש ב-class שלא קיים ב-tokens
❌ לא לדווח "סיימתי" בלי בדיקה אמיתית
❌ לא לדווח "המסך עובד" בלי לראות נתונים אמיתיים
❌ **לא לסיים סשן בלי Git commit!**
❌ **לא לצבור יותר משינוי אחד בלי גיבוי!**
❌ **לא לעשות push בלי לעדכן CHANGELOG.md קודם!**
❌ **לא להשאיר "בדיקות נדרשות" - לבצע אותן!**
❌ **לא לכתוב "תבדוק ש..." - הסוכן בודק בעצמו!**
❌ **לא לכתוב "יש לעדכן CHANGELOG" - הסוכן מעדכן!**

---

## 11. קישורים למסמכים

| מסמך | תיאור |
|------|-------|
| [architecture.md](./architecture.md) | מבנה טכני |
| [style_and_ui.md](./style_and_ui.md) | עיצוב וסגנון |
| [skills.md](./skills.md) | פקודות זמינות |
| [CHANGELOG.md](./CHANGELOG.md) | היסטוריית גירסאות - **קרא בתחילת כל סשן!** |

---

## 12. תבנית הנחיה לתיקון באג

כשמדווחים על באג, להשתמש בתבנית הזו:

```
================================================================================
🚨 באג: [תיאור קצר]
================================================================================

הבעיה:
- [תיאור מה קורה]
- [מה ציפינו שיקרה]

תחקיר (לפני תיקון):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. בדוק מאיפה הנתונים מגיעים
2. הוסף console.log לראות מה חוזר
3. בדוק את הלוגיקה

הראה לי:
- את ה-query/function הרלוונטי
- את התוצאה (console.log)
- את מבנה הנתונים
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

בדיקות אחרי התיקון:
□ [בדיקה 1]
□ [בדיקה 2]
□ [בדיקה 3]
□ Git commit בוצע
================================================================================
```

---

```
══════════════════════════════════════════════════════════════════════════════
סוף המסמך - כל שינוי דורש אישור מפורש
גירסה: 1.3.0 | עדכון אחרון: 2026-01-08
══════════════════════════════════════════════════════════════════════════════
```
